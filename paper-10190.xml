<?xml version="1.0" encoding="ISO-8859-1"?>
<article id="paper-10190">
  <articleinfo>
    <title>Courier-Mailserver</title>
    <author>
      <firstname>Stefan</firstname>
      <surname>Hornburg</surname>
    </author>
    <copyright>
      <year>2004</year>
      <holder>Stefan Hornburg</holder>
    </copyright>
  </articleinfo>

<section>
  <title>Courier-Mailserver</title>
	<para>
	  Der Courier-Mailserver ist eine integrierte und zugleich
	  modulare Mail- und Groupwarelösung, die sich zunehmender
	  Beliebtheit erfreut. Besondere Merkmale sind u.a.
	  die konsequente Unterstützung des Maildir++-Formats für die 
	  Speicherung der Emails, Authentifizierung mittels eines speziellen
	  Dienstes für System- und virtuelle Konten, sowie geteilte Konten.
	  Dazu werden offene Standards wie LDAP und SSL/TLS unterstützt.
	</para>
	<para>
	  Courier entstand aus verschiedenen Projekten von Sam Varshavchik,
	  der auch heute noch den größten Anteil an der Weiterentwicklung
	  dieser Software hat.
	</para>
</section>

<section>
	<title>Pro und Contra</title>
	<para>
	  Courier zeichnet sich dadurch aus, das es sowohl als umfassendes
	  Paket aus Maildiensten verwendet werden kann als auch
	  in Kombinationen von verschiedenen Softwarepaketen, z.B.
	  mit Exim oder Postfix als SMTP-Server.
	</para>
	<para>
	  Ein weiterer wichtiger Pluspunkt ist die kontinuierliche
	  Weiterentwicklung und der umfangreiche Support auf den
	  Mailinglisten vom Autor und anderen Interessierten.
	</para>	
	<para>
	  Für den Einsatz von Courier ist eine gewisse Einarbeitung erforderlich,
	  zumal die Standardkonfiguration nicht für den typischen Kundenkreis
	  eines ISP geeignet ist.
	</para>
</section>

<section>
	<title>Komponenten im Überblick</title>
	<para>
	  Der Courier-Mailserver setzt sich aus den folgenden Komponenten zusammen:
	</para>
	 <itemizedlist>
		<listitem><para>SMTP-Server (Courier)</para></listitem>
		<listitem><para>IMAP-Server (Courier-IMAP)</para></listitem>
		<listitem><para>POP3-Server (Courier-POP)</para></listitem>
		<listitem><para>Webmail (SqWebMail)</para></listitem>
		<listitem><para>Mailinglisten-Server (couriermlm)</para></listitem>
		<listitem><para>MDA mit Filterfähigkeiten (Maildrop)</para></listitem>
		<listitem><para>Webadministration (courierwebadmin)</para></listitem>
	  </itemizedlist>
	<para>
	  Neben dem kompletten Quellpaket sind auch ausgewählte Komponenten
	  als gesonderte Distributionen erhältlich. Dies sind Courier-IMAP,
	  SqWebMail und Maildrop. Allerdings bestehen subtile Unterschiede beim
	  Kompilieren aus dem Gesamtpaket bzw. den Einzelpaketen.
	</para>
</section>

<section>
	<title>Maildir++</title>
	<para>Courier benutzt das sogenannte Maildir++-Format zur Speicherung und
	  zum Zugriff auf Emails. Mailboxdateien werden z.T. unterstützt,
	  z.B. für die Auslieferung von Emails durch Maildrop.
	</para>
	<para>Maildir++ ist eine Erweiterung vom Maildir-Format und erlaubt
	  Platzbeschränkungen (Quota) unabhängig vom Dateisystem.
<!-- Exim nativ, sonst deliverquota -->
	</para>
</section>

<section>
	<title>Authentifizierung</title>
	<para>
	  Die Authentifizierung für die einzelnen Komponenten wird durch 
	  Authentifizierungsmodule realisiert. Dabei wird die Authentifizierung 
	  durch die folgenden beiden Aufgaben charakterisiert:
	</para>
	<orderedlist>
	  <listitem><para>Zu einer Emailadresse das lokale Benutzerkonto mit
		  Heimatverzeichnis, Benutzerkennung (UID) und Gruppenkennung (GID)
		  bestimmen.</para></listitem>
	  <listitem><para>Zu einem Benutzername und einem Passwort das 
		  lokale Benutzerkonto mit
		  Heimatverzeichnis, Benutzerkennung (UID) und Gruppenkennung (GID)
		  bestimmen
		</para></listitem>
	</orderedlist>
	<para>
	  In den Konfigurationsdateien der einzelnen Dienste können die
	  gewünschten Authentifizierungsmodule angegeben werden. Dabei
	  werden die Module nacheinander durchlaufen. Signalisiert eines
	  der Module eine erfolgreiche Authentifizierung, steht der Dienst
	  dem Benutzer zur Verfügung. Dieses Daisy-Chaining erlaubt z.B.
	  PAM-Authentifizierung für Systembenutzer und Authentifizierung
	  gegen eine MySQL-Datenbank für virtuelle Mailkonten ohne
	  Systembenutzer.
	</para>
	<para>
	  Die wichtigsten Authentifizierungsmodule neben dem 
	  Authentifizierungsdämon (authdaemon) sind:
	</para>

	<variablelist>
	  <varlistentry><term>authpam</term>
		<listitem><para>PAM-Authentifizierung</para></listitem>
	  </varlistentry>
	  <varlistentry><term>authuserdb</term>
		<listitem><para>Authentifizierung anhand einer Unix-Datenbank</para></listitem>
	  </varlistentry>
	  <varlistentry><term>authmysql</term>
		<listitem><para>Authentifizierung anhand einer MySQL-Datenbank</para></listitem>
	  </varlistentry>
	  <varlistentry><term>authpgsql</term>
		<listitem><para>Authentifizierung anhand einer PostgreSQL-Datenbank</para></listitem>
	  </varlistentry>
	  <varlistentry><term>authldap</term>
		<listitem><para>Authentifizierung anhand eines LDAP-Verzeichnisses</para></listitem>
	  </varlistentry>
	  <varlistentry><term>authvchkpw</term>
		<listitem><para>Authentifizierung anhand von virtuelle Domains von vpopmail</para></listitem>
	  </varlistentry>
	</variablelist>  
	<para>Der Authentifizierungsdämon ist ein als Dämon laufender Proxy, der
	  dauerhafte Verbindungen zu der Authentifizierungsdatenbank herstellt
	  und dadurch eine deutliche schneller Authentifizierung ermöglicht, 
	  als mit den oben genannten Authentifizierungsmodulen. authdaemon
	  kann ebenfalls mehrere Authentifizierungsmodule nacheinander befragen.
	</para>
</section>

<section>
	<title>SMTP-Server (Courier)</title>
	<para>
	  Die Konfiguration des SMTP-Servers erfolgt über eine Anzahl von
	  Konfigurationsdateien, die sich in einem Verzeichnis befinden.
	  Wir werden als Konfigurationsverzeichnis, auch für die anderen
	  Komponenten, <filename>/etc/courier</filename> verwenden.
	</para>
	<para>
	  Einige Konfigurationsdateien können anstatt als einfache Textdatei 
	  auch als Sammlung von Textdateien in einem Unterverzeichnis von
	  <filename>/etc/courier</filename> zur Verfügung gestellt werden.
	</para>
</section>


<section>
	<title>Maildrop</title>
	<para>
	</para>
</section>

<section>
	<title>SqWebMail</title>
	<para>
	  Die Webmailvariante aus dem Courierpaket nennt sich SqWebMail und besteht
	  aus einem minimalen CGI-Programm und einem Dämon für die Auslieferung der
	  eigentlichen HTML-Seiten.
	</para>
	<para>
	</para>
	<para>
	  Im Gegensatz zu vielen anderen Webmailer arbeitet SqWebMail auf der
	  Dateisystemebene und verbindet sich nicht mit einem vorhandenen POP-
	  bzw. IMAP-Server. Häufig wird SqWebMail aber durch eine solche Lösung
	  ersetzt.
	  </para>
  </section>

<section>
	<title>Installation</title>
	<para>
	  Die Installation von Courier kann direkt aus den Sourcen erfolgen
	  oder es können Debian- bzw. RPM-Pakete verwendet werden.
	</para>
	<para>
	  Die Installation aus den Sourcen wird umfangreich im
	  <filename>INSTALL</filename>-Dokument beschrieben, daß im
	  Quellarchive vorhanden ist bzw. online verfügbar ist.
	 </para>
	<para>
	  Zusätzlich zu den typischen Befehlen zur Kompilierung und Installation
	  eines Open-Source-Pakets werden im letzten Schritt die
	  Konfigurationsdateien installiert bzw. aktualisiert:
	  <programlisting>
./configure
make
make install
make install-configure
	  </programlisting>
	 </para> 
</section>
	
<section>
	<title>Weitere Quellen</title>
	<table>
	  <title>Quellen</title>
	  <tgroup cols="2">
		<thead>
		  <row>
			<entry>Beschreibung</entry>
			<entry>URL</entry>
		  </row>
		</thead>
		<tbody>
		  <row>
			<entry>Courier Homepage</entry>
			<entry><ulink url="http://www.courier-mta.org/" /></entry>
		  </row>
		  <row>
			<entry>Courier Mailingliste</entry>
			<entry></entry>
		  </row>
		</tbody>
		</tgroup>
	  
	</table>
</section>

</article>
