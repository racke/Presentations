% CLONE TICKETS !!
% Konformität
% Anwendung

%% -*- mode: latex; -*-

\section{Request Tracker 3.8 und Plugins}

\subsection*{Autor}
Stefan Hornburg (Racke) \verb/<racke@linuxia.de>/

\subsection*{Kurzbiographie}
Stefan Hornburg arbeitet seit 1998 als Open Source Consultant mit den
Schwerpunkten Linux, Perl und Interchange. Als Captain der ICDEVGROUP leitet
er die Entwicklergruppe von Interchange und ist als Debian Maintainer für
verschiedene Serverpakete verantwortlich (u.a. Courier, Pure-FTPd und
Sympa).

\subsection*{Einführung}
Request Tracker (RT) ist ein in Perl programmiertes
Trouble-Ticket-System. Neben großen Organisationen wie die NASA, MIT und
DESY wird RT auch für das Bugtracking von CPAN und Perl selbst verwendet. 

RT 3.8 wurde im Sommmer 2008 freigegeben. RT 3.8 bringt eine Reihe neuer
Features ohne die bewährte Architektur grundlegend zu verändern: Bookmarks,
Dashboards, graphische Darstellung der Beziehungen zwischen Tickets,
Richtext Email, Emailsignaturen und -verschlüsselung. Außerdem wurde das
Layout gründlich überarbeitet und Hunderte von Bugs behoben. 

Nach einem Überblick über die neuen Features wird die Installation von RT
3.8 und Upgrades von RT 3.6 erläutert. Gerade bei Upgrades kann es leicht zu
Fehlern z.B. bei der Anmeldung oder der Darstellung von Attachments kommen,
wenn die Upgrade-Anweisungen nicht korrekt befolgt werden. 

Dieser Beitrag umfaßt zwei Vorträge, ``Request Tracker 3.8'' und
``Request Tracker Plugins''. Referenz für den Beitrag ist die Version
3.8.2.

% TODO
% add introduction
% applies to both presentations
% Mason

\subsection{Neue Features}
\subsubsection{\WSIndex{Bookmarks}}
Bookmarks (markierte Tickets) dienen zum schnellen Auffinden von Tickets.
In der Einzelansicht eines Tickets befindet sich rechts oben ein Stern,
mit dem dieses markiert werden kann.

\subsubsection{\WSIndex{Anzeigetafeln}}
Anzeigetafeln (\WSIndex{Dashboards}) finden sich im Menü Werkzeuge auf der 
linken Seite.

Jede Anzeigetafel ist eine Sammlung von verschiedene Dingen im
Ticketsystem, genannt \WSIndex{Portlets}. Das können z.B. sein:

\begin{itemize}
\item Suchabfragen
\item Graphen
\item Queues
\end{itemize}

\subsubsection{Richtext Email}

Sollte dieses Feature unerwünscht sein, kann es sowohl global als
auch für jeden einzelnen Benutzer deaktiviert werden.

Global in \verb/RT_SiteConfig.pm/:

\verb/Set($MessageBoxRichText, 0);/.

Individuell kann dieses Feature in den Einstellungen (de)aktiviert
werden.

\subsubsection{Email-Signaturen und -Verschlüsselung}
Eingehende Emails können entschlüsselt und verifiziert werden.
Ausgehende Emails können verschlüsselt und signiert werden.

\subsubsection{Beziehungsgraphen}
Tickets können auf unterschiedliche Art und Weise verknüpft werden
\cite{racke:wikirelations}. Der Graph zu einem Ticket wird anzeigt
wie folgt: Ticketanzeige => Beziehungen => Graph.

Die Eigenschaften des Graphen wie die Art der dargestellten Beziehungen
können dort auch konfiguriert werden. Dabei ist zu beachten, daß kein
Graph dargestellt wird wenn die gewünschten Eigenschaften nicht 
zutreffen.

Die Graphen können gespeichert werden und in ein Dashboard eingebunden
werden.

\subsubsection{Emailversand und \WSIndex{Digests}}
Für den Emailversand kann der Benutzer die folgenden Einstellungen
wählen:
\begin{itemize}
\item Einzeln (Individual messages)
\item Tägliche Zusammenfassungen (Daily digests)
\item Wöchentliche Zusammenfassungen (Weekly digests)
\item Deaktiviert (Suspended)
\end{itemize}
Der Benutzer benötigt das \WSIndex{ModifySelf}-Recht.

Für den Versand der Zusammenfassungen muß ein entsprechender Cronjob
eingerichtet sein.

\subsubsection{Timeout für Sitzungen}
Bisher wurden Sitzungen erst bei expliziter Abmeldung oder Schließen des
Browsers beendet. Mit einem Cronjob kann nun auch ein Timeout zur Ende
einer Sitzung führen.

%\subsubsection{Plugins}
%\subsubsection{Standalone Server}
%\subsubsection{Visual Style}
%\subsubsection{Bug Fixes}

\subsection{Installation}
\subsubsection{Installation aus den Quellen}
Zunächst das Tararchiv der aktuellen Version herunterladen und 
auspacken. Dann in das Verzeichnis mit dem Archivinhalt wechseln:
\begin{verbatim}
wget http://download.bestpractical.com/pub/rt/release/rt.tar.gz
tar -xzvf rt.tar.gz
cd rt-3.8.2
\end{verbatim}
Anschließend empfiehlt es sich, die README-Datei zu lesen.

Eine Auswahl der Optionen für \verb|./configure|:

\begin{tabular}{|l|l|l|}
  \hline
  Option & Bedeutung & Voreinstellung \\
  \hline
  \verb/--prefix/ & Installationsverzeichnis & \verb%/opt/rt3% \\
  \verb/--enable-gpg/ & GPG Support & Ja\\
  \verb/--enable-graphviz/ & GraphViz Charts & Nein\\
  \hline
\end{tabular}
\begin{verbatim}
./configure
\end{verbatim}

Nach der Konfiguration wird getestet ob alle Abhängigkeiten erfüllt sind
bzw. Abhängigkeiten installiert.

\begin{verbatim}
make testdeps
make fixdeps
\end{verbatim}

Dann erfolgt die eigentliche Installation und das Bearbeiten der
Konfigurationsdatei:

\begin{verbatim}
make install
$EDITOR /opt/rt3/etc/RT_SiteConfig.pm
\end{verbatim}

\subsubsection{Debian}
Pakete für RT 3.8.2 befinden sich im experimentellen Zweig.

%\subsection{Upgrade}
\subsection{Konfiguration}
\subsubsection{Cronjobs}
\begin{verbatim}
/etc/cron.daily/request-tracker3.8
# Send daily RT emails.
/usr/sbin/rt-email-digest -m daily

/etc/cron.weekly/request-tracker3.8
# Send weekly RT emails
/usr/sbin/rt-email-digest -m weekly
\end{verbatim}
\subsection{Schnittstellen}


\subsection{Plugins}
% TODO
% - Installationsverzeichnis
Wir beschränken uns auf die Beschreibung von Plugins für RT 3.8.

\subsubsection{Installation und Konfiguration}
Plugins für RT sind üblicherweise als Module vom CPAN erhältlich.
Die Installation wird also mit einem CPAN-Werkzeug durchgeführt:
\begin{verbatim}
cpan> install RT::Authen::ExternalAuth
\end{verbatim}
Alternativ kann man auch die Quellen herunterladen und wie gewohnt
installieren:
\begin{verbatim}
perl Makefile.PL
make
make install
\end{verbatim}
Damit die Installation des Plugins auch funktioniert, wenn RT sich nicht in
\verb%/opt/rt3% befindet, setzt man die Umgebungsvariable
%\WSIndex{\verb%RTHOME%}. 

\begin{verbatim}
RTHOME=/usr/share/request-tracker3.8 perl Makefile.PL
make
make install
\end{verbatim}

Nach der Installation des entsprechenden Perl-Moduls wird RT angewiesen,
dieses auch als Plugin zu laden:
\begin{verbatim}
Set(@Plugins,(qw(RTx::Calendar)));
\end{verbatim}
\subsubsection{\WSIndex{RTx::Email::Completion}}
Das Plugin \verb/RTx::Email::Completion/ erweitert RT um eine automatische
Vervollständigung von Emailadressen.
\subsubsection{\WSIndex{RT::Authen::ExternalAuth}}
Weitere Dokumentation findet sich im RT Wiki \cite{racke:wikixauth}.
\subsubsection{\WSIndex{RTx::Calendar}}
Das Plugin \verb/RTx::Calendar/ erlaubt eine kalendarische Darstellung der
mit den Tickets verknüpften Daten.

Voraussetzung für RTx::Calendar sind die folgenden Perlmodulen vom
CPAN: \WSIndex{Date::Ical}, \WSIndex{Data::ICal}, \WSIndex{DateTime::Set}.

Aktiviert wird das Plugin wie bekannt in \verb/RT_SiteConfig.pm/:

\begin{verbatim}
Set(@Plugins,(qw(RTx::Calendar)));
\end{verbatim}

Bei den Voreinstellungen gibt es dann einen weiteren Punkt \emph{Calendar}.

Um den Kalendar in ``RT auf einen Blick'' einbinden zu können, gilt es
\verb/MyCalendar/ zu den verfügbaren Komponenten hinzuzufügen:

\begin{verbatim}
Set($HomepageComponents, [qw(QuickCreate Quicksearch MyCalendar
     MyAdminQueues MySupportQueues MyReminders
     RefreshHomepage Dashboards)]);
\end{verbatim}

Dann kann der Kalendar der persönlichen Homepage hinzugefügt werden.

%  To enable private searches ICal feeds, you need to give
%  CreateSavedSearch and LoadSavedSearch rights to your users.

\begin{thebibliography}{99}
\bibitem{racke:wikirelations} \emph{Relationships}.\\
\texttt{http://wiki.bestpractical.com/view/Relationships}.
\bibitem{racke:wikixauth} \emph{External Authentication and Information for
    Request Tracker}.\\
\texttt{http://wiki.bestpractical.com/view/ExternalAuth}.
\bibitem{racke:rtessentials} Jesse Vincent, Robert Spier, Dave Rolsky,
  Darren Chamberlain \& Richard Foley.
\emph{RT Essentials}.
O'Reilly, Sebastopol, California, 2005.
\end{thebibliography}


