
\usepackage[T1]{fontenc}
\usepackage{mathptmx}
\usepackage[scaled=.90]{helvet}
\usepackage{courier}

\usepackage{beamerthemesplit}
\usepackage{verbatim}
\usepackage{hyperref}
\usepackage{listings}
\lstset{language=Perl,basicstyle=\footnotesize,tabsize=3,showstringspaces=false}

\title{Template::Zoom}
\author[racke]{Stefan Hornburg (Racke)\\ \texttt{racke@linuxia.de}}
\date[APW2010]{Österreichischer Perlworkshop 2010\\6. November 2010}

\begin{document}

\begin{frame}
  \titlepage
\end{frame}

\tableofcontents

\section{Einführung}
Template::Zoom ist eine neue Templateengine, bei der im Gegensatz zu
Template::Toolkit das eigentliche Template aus reinem HTML besteht und somit
leicht von HTML-Designern bearbeitet werden kann.

Die Verknüpfung zu Objekten, Listen und Datenbankabfragen erfolgt über eine
Spezifikationsdatei.

\subsection{Ziele}
\begin{frame}{Ziele}
 \begin{itemize}
  \item Trennung von Layout, Daten und Programmierung
  \item Handhabung
 \end{itemize}
\end{frame}

\subsection{Bestandteile}
\begin{frame}{Bestandteile}
 \begin{itemize}
  \item Daten oder Objekte
  \item Spezifikation
  \item Template
 \end{itemize}
\end{frame}

\section{Beispiel: Warenkorb}
\subsection{Warenkorb als Hash}
\begin{frame}[fragile]{Warenkorb: Hash}
\begin{lstlisting}
$cart = [
         {isbn => '978-0-2016-1622-4', 
          title => 'The Pragmatic Programmer',
          quantity => 1, price => 49.95},

         {isbn => '978-1-4302-1833-3',
          title => 'Pro Git',
          quantity => 1, price => 34.99},
		];
\end{lstlisting}
\end{frame}
\subsection{Template für Warenkorb}
\begin{frame}[fragile]{Warenkorb: Template}
\lstinputlisting{cart-example-basic/cart.html}
\end{frame}
\subsection{Warenkorb mit ITL}
\begin{frame}[fragile]{Warenkorb: ITL}
\lstinputlisting{cart-example-basic/cart.itl}
\end{frame}
\subsection{Warenkorb mit Template::Toolkit}
\begin{frame}[fragile]{Warenkorb: Template::Toolkit}
\lstinputlisting{cart-example-basic/cart.tt}
\end{frame}
\subsection{Warenkorb mit HTML::Zoom}
\subsection{Warenkorb mit Template::Zoom}
\subsubsection{Spezifikation}
\begin{frame}[fragile]{Warenkorb: Spezifikation}
\lstinputlisting{cart-example-basic/cart.xml}
\end{frame}
\subsubsection{Spezifikation}
\begin{frame}[fragile]{Warenkorb: Spezifikation}
\lstinputlisting{cart-example-basic/cart.xml}
\end{frame}
\subsubsection{Quellcode}
\begin{frame}[fragile]{Warenkorb: Quellcode}
\begin{lstlisting}
use Template::Zoom;

my ($cart, $zoom);

$cart = ...

$zoom = new Template::Zoom(specification_file => 'cart.xml',
                           template_file => 'cart.html',
                           iterators => {cart => $cart});

print $zoom->process();
\end{lstlisting}
\end{frame}
\section{Beispiel: Menüs}
\subsection{Datenbanktabelle für Menüs}
\begin{frame}[fragile]{Menüs: Datenbanktabelle}
\begin{lstlisting}
CREATE TABLE menus (
  code int NOT NULL auto_increment,
  name varchar(255) NOT NULL DEFAULT '',
  url  varchar(255) NOT NULL DEFAULT '',
  menu_name varchar(64) NOT NULL DEFAULT ''
  weight int NOT NULL DEFAULT 0,
  PRIMARY KEY(code),
  KEY(menu_name)
);
\end{lstlisting}
\end{frame}

\subsection{Spezifikation}
\begin{frame}[fragile]{Spezifikation}
\begin{lstlisting}
<specification name="menu" description="Menu">
<list name="menu" class="menu" table="menus">
<input name="name" required="1" field="menu_name"/>
<param name="label" field="name"/>
<param name="url"/>
</list>
</specification>
\end{lstlisting}
\end{frame}

\subsection{Template}
\begin{frame}[fragile]{Template}
\begin{lstlisting}
<ul class="menu">
<li><a href="" class="url"><span class="label"></span></li>
</ul>
\end{lstlisting}
\end{frame}

\section{Template Engines}
\url{http://perl.apache.org/docs/tutorials/tmpl/comparison/comparison.html}

\subsection{Minisprachen}
\begin{frame}[fragile]{Beispiel Minisprache}
\begin{lstlisting}
[% USE product(sku=bar1234) %]
 
[% IF product.isbn %]
It's a book!
[% ELSE %]
It's NOT a book!
[% END %]

[% FOREACH item = product.related %]
You might also enjoy [% item.name %].
[% END %]
\end{lstlisting}
\end{frame}

\subsection{HTML::Zoom}
HTML::Zoom ist eine neue Templateengine von Matt Trout, basierend
auf CSS-Selektoren.

\begin{frame}{HTML::Zoom}
\end{frame}

\section{Filter}
\subsection{Spezifikation}
\begin{frame}[fragile]{Filter: Spezifikation}
\begin{lstlisting}
<specification name="menu" description="Menu">
<list name="menu" class="menu" table="menus">
<input name="name" required="1" field="menu_name"/>
<param name="label" field="name"/>
<param name="url" target="href" filter="link"/>
</list>
</specification>
\end{lstlisting}
\end{frame}

\subsection{Filterfunktion}
\begin{frame}[fragile]{Filter: Funktion}
\begin{lstlisting}
sub link_filter {
    my $page = shift;
    my $url;

    $url = ...
    
    return $url;
}

$zoom = new Template::Zoom(specification_file => 'menu.xml',
						   template_file => 'menu.html',
						   database => $db_object,
						   filters => {link => \&link_filter},
						  );
\end{lstlisting}
\end{frame}
\section{Formulare}

\section{Bedingungen}

\begin{frame}{Das Ende}
 \begin{description}
  \item[CPAN] http://search.cpan.org/perldoc?Template::Zoom
  \item[Website] http://www.temzoo.at/
  \item[Talk]
    http://www.linuxia.de/talks/apw2010/temzoo-apw2010-beamer.pdf
   \item[Fragen] ???
 \end{description}
\end{frame}

\end{document}

%%% Local Variables: 
%%% mode: latex
%%% TeX-master: t
%%% End: 
